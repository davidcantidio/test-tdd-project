{
  "before_after_comparisons": [
    {
      "description": "Template com placeholders",
      "before": {
        "epic": {
          "id": "[EPIC-ID]",
          "name": "[Epic Name]",
          "tasks": [
            {
              "id": "[TASK-1-ID]",
              "title": "Write failing test",
              "tdd_phase": "red",
              "estimate_minutes": 30
            }
          ]
        }
      },
      "after": {
        "epic": {
          "id": "template_epic_template",
          "name": "Epic from epic_template.json",
          "description": "",
          "status": "pending",
          "priority": 1,
          "duration": 5,
          "tags": [],
          "github_integration": {
            "issue_id": null,
            "milestone_id": null,
            "labels": [
              "epic",
              "tdd"
            ]
          },
          "metadata": {
            "created_at": "2025-08-12T00:33:50.083513",
            "updated_at": "2025-08-12T00:33:50.083513",
            "version": "1.0",
            "source": "migration",
            "original_file": "epic_template.json",
            "original_structure": "nested"
          },
          "tasks": [
            {
              "id": "[TASK-1-ID]",
              "title": "Write failing test",
              "description": "",
              "tdd_phase": "red",
              "status": "pending",
              "estimate_minutes": 30,
              "story_points": 1,
              "position": 0,
              "dependencies": [],
              "deliverables": [],
              "performance_constraints": [],
              "acceptance_criteria": [],
              "metadata": {
                "created_at": "2025-08-12T00:33:50.083531",
                "updated_at": "2025-08-12T00:33:50.083531"
              }
            }
          ]
        }
      },
      "transformations": [
        "ID placeholder '[EPIC-ID]' → 'template_epic_template'",
        "Nome placeholder '[Epic Name]' → 'Epic from epic_template.json'",
        "Task ID '[TASK-1-ID]' → 'template_epic_template.1'",
        "Adicionado metadata com timestamps",
        "Adicionado campos obrigatórios com valores padrão"
      ]
    },
    {
      "description": "Estrutura flat para nested",
      "before": {
        "id": 1,
        "title": "User Authentication",
        "estimated_hours": 40,
        "tasks": [
          {
            "task_id": "1.1",
            "name": "Setup auth middleware",
            "phase": "green",
            "estimated_time_minutes": 120
          }
        ]
      },
      "after": {
        "epic": {
          "id": 1,
          "name": "User Authentication",
          "description": "",
          "status": "pending",
          "priority": 1,
          "duration": 5,
          "tags": [],
          "github_integration": {
            "issue_id": null,
            "milestone_id": null,
            "labels": [
              "epic",
              "tdd"
            ]
          },
          "metadata": {
            "created_at": "2025-08-12T00:33:50.083543",
            "updated_at": "2025-08-12T00:33:50.083543",
            "version": "1.0",
            "source": "migration",
            "original_file": "epic_1.json",
            "original_structure": "flat"
          },
          "tasks": [
            {
              "id": "1.1",
              "title": "Setup auth middleware",
              "description": "",
              "tdd_phase": "green",
              "status": "pending",
              "estimate_minutes": 120,
              "story_points": 1,
              "position": 0,
              "dependencies": [],
              "deliverables": [],
              "performance_constraints": [],
              "acceptance_criteria": [],
              "metadata": {
                "created_at": "2025-08-12T00:33:50.083550",
                "updated_at": "2025-08-12T00:33:50.083550"
              }
            }
          ]
        }
      },
      "transformations": [
        "Estrutura flat → nested com wrapper 'epic'",
        "Campo 'title' → 'name'",
        "Campo 'task_id' → 'id'",
        "Campo 'name' → 'title'",
        "Campo 'phase' → 'tdd_phase'",
        "Campo 'estimated_time_minutes' → 'estimate_minutes'"
      ]
    }
  ],
  "common_transformations": [
    {
      "type": "ID Generation",
      "description": "Gerar IDs únicos para placeholders",
      "examples": [
        "'[EPIC-ID]' → 'epic_1'",
        "'X.Y' → 'epic_template_1'",
        "null → 'generated_123'"
      ]
    },
    {
      "type": "Structure Unification",
      "description": "Converter flat para nested",
      "examples": [
        "{'id': 1, 'tasks': []} → {'epic': {'id': 1, 'tasks': []}}",
        "Root level fields → epic.* fields"
      ]
    },
    {
      "type": "Field Mapping",
      "description": "Padronizar nomes de campos",
      "examples": [
        "'task_id' → 'id'",
        "'name' → 'title' (for tasks)",
        "'title' → 'name' (for epics)",
        "'phase' → 'tdd_phase'"
      ]
    },
    {
      "type": "Data Type Standardization",
      "description": "Padronizar tipos de dados",
      "examples": [
        "string numbers → integers",
        "null estimates → 60 (default)",
        "empty arrays preserved",
        "timestamps → ISO 8601"
      ]
    }
  ],
  "edge_cases": [
    {
      "case": "Task sem ID",
      "handling": "Gerar ID baseado em epic_id + posição",
      "example": "epic_0.1, epic_0.2, etc."
    },
    {
      "case": "Dependências quebradas",
      "handling": "Manter lista vazia até resolução manual",
      "example": "dependencies: ['non_existent_id'] → []"
    },
    {
      "case": "TDD phase inválida",
      "handling": "Usar 'analysis' como padrão",
      "example": "'unknown' → 'analysis'"
    },
    {
      "case": "Estimate negativo",
      "handling": "Usar 60 minutos como padrão",
      "example": "-30 → 60"
    },
    {
      "case": "Deliverables vazios",
      "handling": "Remover da lista",
      "example": "['', null, 'valid'] → ['valid']"
    }
  ]
}